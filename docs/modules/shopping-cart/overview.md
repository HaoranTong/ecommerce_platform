<!--
æ–‡æ¡£è¯´æ˜ï¼š
- å†…å®¹ï¼šæ¨¡å—æ–‡æ¡£æ ‡å‡†æ¨¡æ¿ï¼Œç”¨äºåˆ›å»ºæ–°çš„æ¨¡å—æ–‡æ¡£  
- ä½¿ç”¨æ–¹æ³•ï¼šå¤åˆ¶æ­¤æ¨¡æ¿ï¼Œæ›¿æ¢æ¨¡æ¿å˜é‡ï¼Œå¡«å…¥å…·ä½“å†…å®¹
- æ›´æ–°æ–¹æ³•ï¼šæ¨¡æ¿è§„èŒƒå˜æ›´æ—¶ç”±æ¶æ„å¸ˆæ›´æ–°
- å¼•ç”¨å…³ç³»ï¼šè¢«æ‰€æœ‰æ¨¡å—æ–‡æ¡£ä½¿ç”¨
- æ›´æ–°é¢‘ç‡ï¼šæ¨¡æ¿æ ‡å‡†å˜åŒ–æ—¶

âš ï¸ å¼ºåˆ¶æ–‡æ¡£è¦æ±‚ï¼š
æ¯ä¸ªæ¨¡å—å¿…é¡»åŒ…å«ä»¥ä¸‹7ä¸ªæ–‡æ¡£ï¼ˆæ— å¯é€‰é¡¹ï¼‰ï¼š
1. README.md - æ¨¡å—å¯¼èˆªï¼ˆç®€æ´ç‰ˆå…¥å£ï¼‰
2. overview.md - æ¨¡å—æ¦‚è¿°ï¼ˆæœ¬æ¨¡æ¿ï¼Œè¯¦ç»†ç‰ˆï¼‰
3. requirements.md - ä¸šåŠ¡éœ€æ±‚æ–‡æ¡£ï¼ˆå¼ºåˆ¶ï¼‰
4. design.md - è®¾è®¡å†³ç­–æ–‡æ¡£ï¼ˆå¼ºåˆ¶ï¼‰
5. api-spec.md - APIè§„èŒƒæ–‡æ¡£ï¼ˆå¼ºåˆ¶ï¼‰
6. api-implementation.md - APIå®æ–½è®°å½•ï¼ˆå¼ºåˆ¶ï¼‰
7. implementation.md - å®ç°ç»†èŠ‚æ–‡æ¡£ï¼ˆå¼ºåˆ¶ï¼‰
-->

# è´­ç‰©è½¦æ¨¡å— (Shopping Cart)

ğŸ“ **çŠ¶æ€**: ğŸ”„ å¼€å‘ä¸­  
ğŸ“… **åˆ›å»ºæ—¥æœŸ**: 2025-09-16  
ğŸ‘¤ **è´Ÿè´£äºº**: å¼€å‘å›¢é˜Ÿ  
ğŸ”„ **æœ€åæ›´æ–°**: 2025-09-16  
ğŸ“‹ **ç‰ˆæœ¬**: v1.0.0  

## æ¨¡å—æ¦‚è¿°

### ä¸»è¦èŒè´£
è´­ç‰©è½¦æ¨¡å—æ˜¯ç”µå•†å¹³å°çš„æ ¸å¿ƒäº¤æ˜“å‡†å¤‡æ¨¡å—ï¼Œè´Ÿè´£ç®¡ç†ç”¨æˆ·è´­ç‰©æ„å‘ï¼š
- **è´­ç‰©è½¦ç®¡ç†**: æä¾›å®Œæ•´çš„è´­ç‰©è½¦CRUDæ“ä½œåŠŸèƒ½
- **åº“å­˜éªŒè¯**: å®æ—¶éªŒè¯å•†å“åº“å­˜çŠ¶æ€ï¼Œé˜²æ­¢è¶…å–
- **ä»·æ ¼è®¡ç®—**: åŠ¨æ€è®¡ç®—å•†å“å°è®¡å’Œè´­ç‰©è½¦æ€»ä»·
- **æ•°æ®æŒä¹…åŒ–**: åŸºäºRedis+MySQLçš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨
- **ç”¨æˆ·ä½“éªŒ**: æä¾›æµç•…çš„è´­ç‰©è½¦æ“ä½œä½“éªŒ

### ä¸šåŠ¡ä»·å€¼
- **æ ¸å¿ƒä»·å€¼**: ä½œä¸ºè´­ç‰©åˆ°è®¢å•çš„å…³é”®æ¡¥æ¢ï¼Œç›´æ¥å½±å“ç”µå•†å¹³å°è½¬åŒ–ç‡å’Œç”¨æˆ·ä½“éªŒ
- **ç”¨æˆ·æ”¶ç›Š**: æ–¹ä¾¿ç”¨æˆ·æ”¶é›†å¿ƒä»ªå•†å“ã€æ¯”è¾ƒé€‰æ‹©ã€æ‰¹é‡ç»“ç®—ï¼Œæå‡è´­ç‰©æ•ˆç‡
- **ç³»ç»Ÿæ”¶ç›Š**: ç¼“å­˜ç”¨æˆ·è´­ä¹°æ„å‘ã€å‡å°‘é‡å¤å•†å“æŸ¥è¯¢ã€ä¸ºæ¨èç³»ç»Ÿæä¾›æ•°æ®æ”¯æŒ

### æ¨¡å—è¾¹ç•Œ
- **åŒ…å«åŠŸèƒ½**: è´­ç‰©è½¦CRUDã€åº“å­˜éªŒè¯ã€ä»·æ ¼è®¡ç®—ã€ç¼“å­˜ç®¡ç†ã€æ•°æ®åŒæ­¥
- **æ’é™¤åŠŸèƒ½**: è®¢å•åˆ›å»ºã€æ”¯ä»˜å¤„ç†ã€å•†å“ç®¡ç†ã€ç”¨æˆ·è®¤è¯ã€ä¿ƒé”€è®¡ç®—
- **ä¾èµ–æ¨¡å—**: user_auth(è®¤è¯)ã€product_catalog(å•†å“)ã€inventory_management(åº“å­˜)
- **è¢«ä¾èµ–**: order_management(è®¢å•)ã€recommendation_system(æ¨è)

## æŠ€æœ¯æ¶æ„

### æ¶æ„å›¾
```mermaid
graph TB
    subgraph "è´­ç‰©è½¦æ¨¡å—æ¶æ„"
        A[API Router] --> B[Service Layer]
        B --> C[Repository Layer]
        C --> D[Redis Cache]
        C --> E[MySQL Database]
        
        B --> F[Dependencies]
        F --> G[User Auth]
        F --> H[Product Catalog]
        F --> I[Inventory Service]
        
        J[Models & Schemas] --> B
        K[Utils & Helpers] --> B
    end
    
    subgraph "å¤–éƒ¨ç³»ç»Ÿ"
        L[ç”¨æˆ·è¯·æ±‚] --> A
        A --> M[å“åº”æ•°æ®]
    end
```

### æ ¸å¿ƒç»„ä»¶
```
shopping_cart/
â”œâ”€â”€ router.py           # è´­ç‰©è½¦APIè·¯ç”±ï¼šCRUDæ¥å£å®šä¹‰
â”œâ”€â”€ service.py          # ä¸šåŠ¡é€»è¾‘å±‚ï¼šè´­ç‰©è½¦æ“ä½œã€åº“å­˜éªŒè¯ã€ä»·æ ¼è®¡ç®—
â”œâ”€â”€ models.py           # æ•°æ®æ¨¡å‹ï¼šCartã€CartItemå®ä½“å®šä¹‰
â”œâ”€â”€ schemas.py          # è¯·æ±‚å“åº”æ¨¡å‹ï¼šAPIè¾“å…¥è¾“å‡ºæ ¼å¼
â”œâ”€â”€ dependencies.py     # ä¾èµ–æ³¨å…¥ï¼šè®¤è¯ã€æƒé™ã€æœåŠ¡ä¾èµ–
â””â”€â”€ README.md           # æ¨¡å—ç®€ä»‹å’Œå¿«é€Ÿå¯¼èˆª
```

### æ¨¡å—åŒ–å•ä½“æ¶æ„
- **æ¶æ„æ¨¡å¼**: æ¨¡å—åŒ–å•ä½“æ¶æ„ (Modular Monolith)
- **å‚ç›´åˆ‡ç‰‡**: æ¯ä¸ªæ¨¡å—åŒ…å«å®Œæ•´çš„ä¸šåŠ¡åŠŸèƒ½
- **ä¾èµ–åŸåˆ™**: ä¾èµ–æ³¨å…¥å’Œæ¥å£æŠ½è±¡

### æ ¸å¿ƒåŸºç¡€è®¾æ–½
```
app/core/               # æ ¸å¿ƒåŸºç¡€è®¾æ–½
â”œâ”€â”€ database.py         # æ•°æ®åº“è¿æ¥ç®¡ç†
â”œâ”€â”€ redis_client.py     # Redisç¼“å­˜å®¢æˆ·ç«¯  
â”œâ”€â”€ auth.py             # è®¤è¯ä¸­é—´ä»¶
â””â”€â”€ __init__.py         # æ ¸å¿ƒç»„ä»¶å¯¼å‡º
```

### é€‚é…å™¨é›†æˆ
```
app/adapters/           # ç¬¬ä¸‰æ–¹æœåŠ¡é€‚é…å™¨
â”œâ”€â”€ {service_type}/     # æœåŠ¡ç±»å‹ç›®å½•
â”‚   â”œâ”€â”€ {provider}_adapter.py
â”‚   â””â”€â”€ config.py
```

### æŠ€æœ¯æ ˆ
- **ç¼–ç¨‹è¯­è¨€**: Python 3.11+
- **Webæ¡†æ¶**: FastAPI (å¼‚æ­¥æ”¯æŒã€è‡ªåŠ¨æ–‡æ¡£)
- **æ•°æ®åº“**: MySQL 8.0 (ä¸»å­˜å‚¨) + Redis (ç¼“å­˜)
- **ORM**: SQLAlchemy 2.0 (å¼‚æ­¥æ”¯æŒ)
- **ç¼“å­˜**: Redis 7.0 (åˆ†å¸ƒå¼ç¼“å­˜ã€ä¼šè¯å­˜å‚¨)
- **è®¤è¯**: JWT Token + FastAPI Security

### è®¾è®¡æ¨¡å¼
- **ä½¿ç”¨çš„è®¾è®¡æ¨¡å¼**: å¦‚Repositoryã€Factoryã€Strategyç­‰
- **æ¶æ„æ¨¡å¼**: å¦‚Clean Architectureã€DDDç­‰
- **ä»£ç ç»„ç»‡**: åˆ†å±‚æ¶æ„è¯´æ˜

## æ ¸å¿ƒåŠŸèƒ½

### åŠŸèƒ½åˆ—è¡¨
| åŠŸèƒ½åç§° | ä¼˜å…ˆçº§ | çŠ¶æ€ | æè¿° |
|---------|--------|------|------|
| æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦ | P0 | â³ å¾…å¼€å§‹ | éªŒè¯åº“å­˜åå°†å•†å“æ·»åŠ åˆ°è´­ç‰©è½¦ |
| æŸ¥çœ‹è´­ç‰©è½¦å†…å®¹ | P0 | â³ å¾…å¼€å§‹ | æ˜¾ç¤ºè´­ç‰©è½¦æ‰€æœ‰å•†å“å’Œä»·æ ¼ä¿¡æ¯ |
| ä¿®æ”¹å•†å“æ•°é‡ | P0 | â³ å¾…å¼€å§‹ | æ›´æ–°è´­ç‰©è½¦å•†å“æ•°é‡å¹¶é‡æ–°è®¡ç®—ä»·æ ¼ |
| åˆ é™¤è´­ç‰©è½¦å•†å“ | P0 | â³ å¾…å¼€å§‹ | ç§»é™¤è´­ç‰©è½¦ä¸­çš„æŒ‡å®šå•†å“ |
| æ¸…ç©ºè´­ç‰©è½¦ | P1 | â³ å¾…å¼€å§‹ | ä¸€é”®æ¸…ç©ºæ•´ä¸ªè´­ç‰©è½¦ |
| æ‰¹é‡æ“ä½œ | P2 | â³ å¾…å¼€å§‹ | æ”¯æŒæ‰¹é‡æ·»åŠ ã€åˆ é™¤å•†å“ |

### æ ¸å¿ƒä¸šåŠ¡æµç¨‹
```mermaid
graph TD
    A[ç”¨æˆ·é€‰æ‹©å•†å“] --> B[ç‚¹å‡»åŠ å…¥è´­ç‰©è½¦]
    B --> C[éªŒè¯ç”¨æˆ·ç™»å½•çŠ¶æ€]
    C --> D{ç”¨æˆ·å·²ç™»å½•?}
    D -->|å¦| E[è·³è½¬ç™»å½•é¡µé¢]
    D -->|æ˜¯| F[éªŒè¯å•†å“åº“å­˜]
    F --> G{åº“å­˜å……è¶³?}
    G -->|å¦| H[æç¤ºåº“å­˜ä¸è¶³]
    G -->|æ˜¯| I[æ£€æŸ¥è´­ç‰©è½¦å•†å“é™åˆ¶]
    I --> J{æ˜¯å¦è¶…å‡ºé™åˆ¶?}
    J -->|æ˜¯| K[æç¤ºå•†å“æ•°é‡é™åˆ¶]
    J -->|å¦| L[æ·»åŠ /æ›´æ–°è´­ç‰©è½¦]
    L --> M[æ›´æ–°Redisç¼“å­˜]
    M --> N[åŒæ­¥MySQLæ•°æ®]
    N --> O[è¿”å›è´­ç‰©è½¦æœ€æ–°çŠ¶æ€]
    O --> P[æ›´æ–°å‰ç«¯æ˜¾ç¤º]
```

### ä¸šåŠ¡è§„åˆ™
1. **ç”¨æˆ·æƒé™è§„åˆ™**: åªæœ‰ç™»å½•ç”¨æˆ·æ‰èƒ½æ“ä½œè´­ç‰©è½¦ï¼Œæ¯ä¸ªç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„è´­ç‰©è½¦æ•°æ®
2. **åº“å­˜éªŒè¯è§„åˆ™**: æ·»åŠ å•†å“å‰å¿…é¡»éªŒè¯åº“å­˜ï¼Œåº“å­˜ä¸è¶³æ—¶ç¦æ­¢æ·»åŠ å¹¶æç¤ºç”¨æˆ·
3. **æ•°é‡é™åˆ¶è§„åˆ™**: å•ä¸ªSKUæœ€å¤§æ•°é‡999ä¸ªï¼Œè´­ç‰©è½¦æœ€å¤šåŒ…å«50ä¸ªä¸åŒå•†å“
4. **ä»·æ ¼è®¡ç®—è§„åˆ™**: å®æ—¶è®¡ç®—å•†å“å°è®¡å’Œæ€»ä»·ï¼Œä¿ç•™2ä½å°æ•°ç²¾åº¦
5. **æ•°æ®ä¸€è‡´æ€§è§„åˆ™**: Rediså’ŒMySQLåŒå†™ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼ŒRedisæ•…éšœæ—¶é™çº§åˆ°MySQL
6. **ç¼“å­˜ç­–ç•¥è§„åˆ™**: è´­ç‰©è½¦æ•°æ®ä¼˜å…ˆä»Redisè¯»å–ï¼Œå†™æ“ä½œåŒæ—¶æ›´æ–°ç¼“å­˜å’Œæ•°æ®åº“

## æ•°æ®æ¨¡å‹

### æ ¸å¿ƒå®ä½“
```python
# è´­ç‰©è½¦ä¸»è¡¨
class Cart(Base):
    __tablename__ = "carts"
    
    id = Column(Integer, primary_key=True)
    user_id = Column(Integer, ForeignKey("users.id"), nullable=False, unique=True)
    created_at = Column(DateTime, default=datetime.utcnow)
    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    
    # å…³è”å…³ç³»
    items = relationship("CartItem", back_populates="cart", cascade="all, delete-orphan")

# è´­ç‰©è½¦å•†å“é¡¹
class CartItem(Base):
    __tablename__ = "cart_items"
    
    id = Column(Integer, primary_key=True)
    cart_id = Column(Integer, ForeignKey("carts.id"), nullable=False)
    sku_id = Column(Integer, ForeignKey("products.id"), nullable=False)
    quantity = Column(Integer, nullable=False, default=1)
    unit_price = Column(Decimal(10, 2), nullable=False)  # åŠ å…¥æ—¶çš„å•ä»·
    created_at = Column(DateTime, default=datetime.utcnow)
    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    
    # å”¯ä¸€çº¦æŸ
    __table_args__ = (UniqueConstraint('cart_id', 'sku_id'),)
    
    # å…³è”å…³ç³»
    cart = relationship("Cart", back_populates="items")
```

### æ•°æ®å…³ç³»å›¾
```mermaid
erDiagram
    USERS ||--|| CARTS : "1:1"
    CARTS ||--o{ CART_ITEMS : "1:N"
    PRODUCTS ||--o{ CART_ITEMS : "1:N"
    
    USERS {
        int id PK
        string username
        string email
    }
    
    CARTS {
        int id PK
        int user_id FK
        datetime created_at
        datetime updated_at
    }
    
    CART_ITEMS {
        int id PK
        int cart_id FK
        int sku_id FK
        int quantity
        decimal unit_price
        datetime created_at
        datetime updated_at
    }
    
    PRODUCTS {
        int id PK
        string name
        decimal price
        int stock_quantity
    }
```

### æ•°æ®çº¦æŸ
- **å”¯ä¸€æ€§çº¦æŸ**: æ¯ä¸ªç”¨æˆ·åªæœ‰ä¸€ä¸ªè´­ç‰©è½¦(user_idå”¯ä¸€)ï¼Œè´­ç‰©è½¦ä¸­æ¯ä¸ªSKUåªæœ‰ä¸€æ¡è®°å½•
- **å¤–é”®çº¦æŸ**: cart_idå…³è”è´­ç‰©è½¦è¡¨ï¼Œsku_idå…³è”å•†å“è¡¨ï¼Œuser_idå…³è”ç”¨æˆ·è¡¨
- **ä¸šåŠ¡çº¦æŸ**: å•†å“æ•°é‡å¿…é¡»å¤§äº0ä¸”å°äºç­‰äº999ï¼Œå•ä»·å¿…é¡»å¤§äº0

## APIæ¥å£

### æ¥å£åˆ—è¡¨
| æ¥å£ | æ–¹æ³• | è·¯å¾„ | æè¿° | çŠ¶æ€ |
|------|------|------|------|------|
| æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦ | POST | /api/v1/cart/items | æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦æˆ–æ›´æ–°æ•°é‡ | â³ å¾…å¼€å‘ |
| è·å–è´­ç‰©è½¦ | GET | /api/v1/cart | è·å–å½“å‰ç”¨æˆ·çš„è´­ç‰©è½¦å†…å®¹ | â³ å¾…å¼€å‘ |
| æ›´æ–°å•†å“æ•°é‡ | PUT | /api/v1/cart/items/{item_id} | ä¿®æ”¹è´­ç‰©è½¦ä¸­å•†å“çš„æ•°é‡ | â³ å¾…å¼€å‘ |
| åˆ é™¤å•†å“ | DELETE | /api/v1/cart/items/{item_id} | ä»è´­ç‰©è½¦åˆ é™¤æŒ‡å®šå•†å“ | â³ å¾…å¼€å‘ |
| æ‰¹é‡åˆ é™¤ | DELETE | /api/v1/cart/items | æ‰¹é‡åˆ é™¤è´­ç‰©è½¦å•†å“ | â³ å¾…å¼€å‘ |
| æ¸…ç©ºè´­ç‰©è½¦ | DELETE | /api/v1/cart | æ¸…ç©ºæ•´ä¸ªè´­ç‰©è½¦ | â³ å¾…å¼€å‘ |

### æ¥å£è¯¦æƒ…ç¤ºä¾‹
```yaml
/api/v1/cart/items:
  post:
    summary: æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              sku_id:
                type: integer
                description: å•†å“SKU ID
              quantity:
                type: integer
                minimum: 1
                maximum: 999
                description: å•†å“æ•°é‡
    responses:
      200:
        description: æ·»åŠ æˆåŠŸ
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CartResponse'
      400:
        description: è¯·æ±‚å‚æ•°é”™è¯¯æˆ–åº“å­˜ä¸è¶³
```

### é”™è¯¯ç 
| é”™è¯¯ç  | çŠ¶æ€ç  | æè¿° | è§£å†³æ–¹æ¡ˆ |
|--------|--------|------|----------|
| CART_001 | 400 | å•†å“æ•°é‡å‚æ•°é”™è¯¯ | æ£€æŸ¥æ•°é‡èŒƒå›´1-999 |
| CART_002 | 400 | å•†å“åº“å­˜ä¸è¶³ | å‡å°‘å•†å“æ•°é‡æˆ–é€‰æ‹©å…¶ä»–å•†å“ |
| CART_003 | 400 | è´­ç‰©è½¦å•†å“æ•°é‡è¶…é™ | è´­ç‰©è½¦æœ€å¤š50ä¸ªä¸åŒå•†å“ |
| CART_004 | 404 | å•†å“ä¸å­˜åœ¨ | ç¡®è®¤å•†å“IDæ­£ç¡®æ€§ |
| CART_005 | 409 | å•†å“å·²ä¸‹æ¶ | é€‰æ‹©å…¶ä»–åœ¨å”®å•†å“ |

## æµ‹è¯•ç­–ç•¥

### æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡
- **å•å…ƒæµ‹è¯•**: â‰¥ 85%
- **é›†æˆæµ‹è¯•**: â‰¥ 70%
- **ç«¯åˆ°ç«¯æµ‹è¯•**: æ ¸å¿ƒä¸šåŠ¡æµç¨‹100%

### æµ‹è¯•ç±»å‹
```python
# å•å…ƒæµ‹è¯•ç¤ºä¾‹
class TestCartService:
    def test_add_item_success(self):
        # æµ‹è¯•æˆåŠŸæ·»åŠ å•†å“åˆ°è´­ç‰©è½¦
        pass
    
    def test_add_item_insufficient_stock(self):
        # æµ‹è¯•åº“å­˜ä¸è¶³æƒ…å†µ
        pass
    
    def test_update_item_quantity(self):
        # æµ‹è¯•æ›´æ–°å•†å“æ•°é‡
        pass

# é›†æˆæµ‹è¯•ç¤ºä¾‹  
class TestCartAPI:
    def test_cart_crud_workflow(self):
        # æµ‹è¯•è´­ç‰©è½¦å®Œæ•´CRUDæµç¨‹
        pass
        
    def test_inventory_integration(self):
        # æµ‹è¯•ä¸åº“å­˜ç³»ç»Ÿçš„é›†æˆ
        pass
```

### æ€§èƒ½æµ‹è¯•
- **å“åº”æ—¶é—´**: APIå“åº”æ—¶é—´ < 100ms (P95)
- **å¹¶å‘å¤„ç†**: æ”¯æŒ8000å¹¶å‘ç”¨æˆ·æ“ä½œ
- **æ•°æ®é‡**: æ”¯æŒ100ä¸‡æ´»è·ƒè´­ç‰©è½¦ï¼Œå•è´­ç‰©è½¦50ä¸ªå•†å“

### æµ‹è¯•æ•°æ®
- **æµ‹è¯•æ•°æ®ç”Ÿæˆ**: Factory Boyæˆ–è‡ªå®šä¹‰å·¥å‚
- **æ•°æ®æ¸…ç†**: æ¯ä¸ªæµ‹è¯•åæ¸…ç†æµ‹è¯•æ•°æ®
- **Mockç­–ç•¥**: å¤–éƒ¨ä¾èµ–çš„Mockç­–ç•¥

## éƒ¨ç½²å’Œè¿ç»´

### ç¯å¢ƒè¦æ±‚
- **å¼€å‘ç¯å¢ƒ**: æœ¬åœ°å¼€å‘ç¯å¢ƒé…ç½®
- **æµ‹è¯•ç¯å¢ƒ**: æµ‹è¯•ç¯å¢ƒé…ç½®è¦æ±‚
- **ç”Ÿäº§ç¯å¢ƒ**: ç”Ÿäº§ç¯å¢ƒé…ç½®è¦æ±‚

### é…ç½®ç®¡ç†
```python
# è´­ç‰©è½¦æ¨¡å—ç¯å¢ƒå˜é‡é…ç½®
CART_REDIS_URL=redis://localhost:6379/1
CART_CACHE_TTL=3600  # è´­ç‰©è½¦ç¼“å­˜è¿‡æœŸæ—¶é—´(ç§’)
CART_MAX_ITEMS=50    # è´­ç‰©è½¦æœ€å¤§å•†å“ç§ç±»æ•°
CART_MAX_QUANTITY=999 # å•å•†å“æœ€å¤§æ•°é‡
CART_DATABASE_URL=mysql://user:pass@localhost/ecommerce
```

### ç›‘æ§æŒ‡æ ‡
- **ä¸šåŠ¡æŒ‡æ ‡**: è´­ç‰©è½¦è½¬åŒ–ç‡ã€å¹³å‡å•†å“æ•°é‡ã€æ·»åŠ /åˆ é™¤æ“ä½œé¢‘ç‡
- **æŠ€æœ¯æŒ‡æ ‡**: APIå“åº”æ—¶é—´ã€Rediså‘½ä¸­ç‡ã€æ•°æ®åº“æŸ¥è¯¢æ—¶é—´ã€é”™è¯¯ç‡
- **èµ„æºæŒ‡æ ‡**: Rediså†…å­˜ä½¿ç”¨ã€æ•°æ®åº“è¿æ¥æ± ã€CPUå’Œå†…å­˜ä½¿ç”¨ç‡

### å‘Šè­¦è§„åˆ™
- **é”™è¯¯ç‡**: > 1% è§¦å‘å‘Šè­¦ (è´­ç‰©è½¦æ“ä½œå¤±è´¥ç‡)
- **å“åº”æ—¶é—´**: > 100ms è§¦å‘å‘Šè­¦ (APIå“åº”æ—¶é—´)
- **ç¼“å­˜å‘½ä¸­ç‡**: < 85% è§¦å‘å‘Šè­¦ (Redisç¼“å­˜æ•ˆæœ)
- **èµ„æºä½¿ç”¨**: > 80% è§¦å‘å‘Šè­¦ (Rediså†…å­˜ã€æ•°æ®åº“è¿æ¥)

## å®‰å…¨è€ƒè™‘

### è®¤è¯æˆæƒ
- **èº«ä»½è®¤è¯**: JWT TokenéªŒè¯
- **æƒé™æ§åˆ¶**: åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
- **APIå®‰å…¨**: Rate Limitingã€CORSç­‰

### æ•°æ®å®‰å…¨
- **æ•°æ®åŠ å¯†**: æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
- **ä¼ è¾“å®‰å…¨**: HTTPSä¼ è¾“
- **è¾“å…¥éªŒè¯**: ä¸¥æ ¼çš„è¾“å…¥éªŒè¯

### å®¡è®¡æ—¥å¿—
- **æ“ä½œæ—¥å¿—**: è®°å½•å…³é”®æ“ä½œ
- **è®¿é—®æ—¥å¿—**: è®°å½•APIè®¿é—®
- **å®‰å…¨æ—¥å¿—**: è®°å½•å®‰å…¨ç›¸å…³äº‹ä»¶

## æ€§èƒ½ä¼˜åŒ–

### ç¼“å­˜ç­–ç•¥
- **Redisç¼“å­˜**: è´­ç‰©è½¦æ•°æ®ä¼˜å…ˆå­˜å‚¨åœ¨Redisï¼ŒTTLè®¾ç½®ä¸º1å°æ—¶
- **æœ¬åœ°ç¼“å­˜**: å•†å“ä¿¡æ¯å’Œä»·æ ¼æ•°æ®æœ¬åœ°ç¼“å­˜10åˆ†é’Ÿ
- **æŸ¥è¯¢ç¼“å­˜**: é¢‘ç¹æŸ¥è¯¢ç»“æœç¼“å­˜ï¼Œå‡å°‘æ•°æ®åº“å‹åŠ›

### æ•°æ®åº“ä¼˜åŒ–
- **ç´¢å¼•ä¼˜åŒ–**: user_idã€sku_idã€cart_idå»ºç«‹ç´¢å¼•ï¼Œå¤åˆç´¢å¼•(cart_id, sku_id)
- **æŸ¥è¯¢ä¼˜åŒ–**: æ‰¹é‡æŸ¥è¯¢å‡å°‘æ•°æ®åº“å¾€è¿”ï¼Œä½¿ç”¨JOINä¼˜åŒ–å…³è”æŸ¥è¯¢
- **è¿æ¥æ± **: é…ç½®æœ€å¤§20ä¸ªè¿æ¥ï¼Œæœ€å°5ä¸ªè¿æ¥çš„è¿æ¥æ± 

### æ‰©å±•æ€§è®¾è®¡
- **æ°´å¹³æ‰©å±•**: æ”¯æŒå¤šå®ä¾‹éƒ¨ç½²ï¼ŒRedisé›†ç¾¤åŒ–ï¼Œæ•°æ®åº“è¯»å†™åˆ†ç¦»
- **å‚ç›´æ‰©å±•**: æ ¹æ®è´Ÿè½½è‡ªåŠ¨è°ƒæ•´èµ„æºé…ç½®ï¼Œæ”¯æŒå®¹å™¨åŒ–éƒ¨ç½²
- **é™çº§ç­–ç•¥**: Redisæ•…éšœæ—¶é™çº§åˆ°MySQLï¼Œä¿è¯åŸºæœ¬åŠŸèƒ½å¯ç”¨

## é—®é¢˜å’Œé£é™©

### å·²çŸ¥é—®é¢˜
| é—®é¢˜ID | æè¿° | ä¼˜å…ˆçº§ | çŠ¶æ€ | è§£å†³æ–¹æ¡ˆ |
|--------|------|--------|------|----------|
| CART-001 | é«˜å¹¶å‘ä¸‹åº“å­˜æ•°æ®ä¸ä¸€è‡´ | é«˜ | ğŸ”„ å¾…å¤„ç† | ä½¿ç”¨Redisåˆ†å¸ƒå¼é”+ä¹è§‚é”æœºåˆ¶ |

### æŠ€æœ¯é£é™©
- **Redisæ•…éšœé£é™©**: Redisç¼“å­˜ä¸å¯ç”¨å½±å“æ€§èƒ½ï¼Œç¼“è§£æªæ–½ï¼šå®ç°é™çº§åˆ°MySQL+Redisé›†ç¾¤
- **åº“å­˜è¶…å–é£é™©**: é«˜å¹¶å‘åœºæ™¯ä¸‹å¯èƒ½è¶…å–ï¼Œç¼“è§£æªæ–½ï¼šåˆ†å¸ƒå¼é”+äº‹åŠ¡æ§åˆ¶
- **æ•°æ®ä¸€è‡´æ€§é£é™©**: ç¼“å­˜ä¸æ•°æ®åº“æ•°æ®ä¸ä¸€è‡´ï¼Œç¼“è§£æªæ–½ï¼šåŒå†™ç­–ç•¥+æœ€ç»ˆä¸€è‡´æ€§ä¿è¯

### æŠ€æœ¯å€ºåŠ¡
- **ç¼“å­˜é¢„çƒ­æœºåˆ¶**: éœ€è¦å®ç°ç³»ç»Ÿå¯åŠ¨æ—¶çš„ç¼“å­˜é¢„çƒ­ï¼Œæå‡é¦–æ¬¡è®¿é—®æ€§èƒ½
- **æ‰¹é‡æ“ä½œä¼˜åŒ–**: å½“å‰å•ä¸ªæ“ä½œè¾ƒå¤šï¼Œéœ€è¦å®ç°æ‰¹é‡æ·»åŠ /åˆ é™¤åŠŸèƒ½

## å¼€å‘è®¡åˆ’

### é‡Œç¨‹ç¢‘
- **M1**: æ ¸å¿ƒCRUDåŠŸèƒ½å¼€å‘ (é¢„è®¡: ç¬¬1å‘¨)
- **M2**: åº“å­˜é›†æˆå’Œç¼“å­˜å®ç° (é¢„è®¡: ç¬¬2å‘¨)  
- **M3**: æ€§èƒ½ä¼˜åŒ–å’Œæµ‹è¯•å®Œå–„ (é¢„è®¡: ç¬¬3å‘¨)

### ä»»åŠ¡åˆ†è§£
- [ ] æ•°æ®æ¨¡å‹è®¾è®¡å’Œå®ç° (è´Ÿè´£äºº: åç«¯å¼€å‘, é¢„è®¡: 2å¤©)
- [ ] Redisç¼“å­˜é›†æˆ (è´Ÿè´£äºº: åç«¯å¼€å‘, é¢„è®¡: 2å¤©)
- [ ] APIæ¥å£å®ç° (è´Ÿè´£äºº: åç«¯å¼€å‘, é¢„è®¡: 3å¤©)
- [ ] åº“å­˜æœåŠ¡é›†æˆ (è´Ÿè´£äºº: åç«¯å¼€å‘, é¢„è®¡: 2å¤©)
- [ ] å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯• (è´Ÿè´£äºº: æµ‹è¯•å·¥ç¨‹å¸ˆ, é¢„è®¡: 2å¤©)
- [ ] æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ– (è´Ÿè´£äºº: å…¨æ ˆå¼€å‘, é¢„è®¡: 2å¤©)

## ç›¸å…³æ–‡æ¡£

### æ¶æ„æ–‡æ¡£
- [ç³»ç»Ÿæ¶æ„æ€»è§ˆ](../architecture/overview.md)
- [APIè®¾è®¡è§„èŒƒ](../architecture/api-standards.md)
- [æ•°æ®æ¨¡å‹è§„èŒƒ](../architecture/data-models.md)

### å¼€å‘æ–‡æ¡£
- [å¼€å‘è§„èŒƒ](../development/development-standards.md)
- [æµ‹è¯•æŒ‡å—](../development/testing.md)
- [éƒ¨ç½²æŒ‡å—](../operations/deployment.md)

### éœ€æ±‚æ–‡æ¡£
- [åŠŸèƒ½éœ€æ±‚è§„èŒƒ](../requirements/functional.md)
- [è´­ç‰©è½¦ä¸šåŠ¡éœ€æ±‚](./requirements.md)

### ä¾èµ–æ¨¡å—
- [ç”¨æˆ·è®¤è¯æ¨¡å—](../user_auth/overview.md)
- [å•†å“ç›®å½•æ¨¡å—](../product_catalog/overview.md)
- [åº“å­˜ç®¡ç†æ¨¡å—](../inventory_management/overview.md)

### è¢«ä¾èµ–æ¨¡å—
- [è®¢å•ç®¡ç†æ¨¡å—](../order_management/overview.md)
- [æ¨èç³»ç»Ÿæ¨¡å—](../recommendation_system/overview.md)

---

ğŸ“ **æ¨¡æ¿ä½¿ç”¨è¯´æ˜**:
1. å¤åˆ¶æ­¤æ¨¡æ¿åˆ›å»ºæ–°çš„æ¨¡å—æ–‡æ¡£
2. æ›¿æ¢æ‰€æœ‰ `{å˜é‡}` ä¸ºå®é™…å€¼
3. åˆ é™¤ä¸é€‚ç”¨çš„ç« èŠ‚
4. æ ¹æ®æ¨¡å—ç‰¹ç‚¹è°ƒæ•´ç« èŠ‚å†…å®¹
5. ä¿æŒæ–‡æ¡£åŠæ—¶æ›´æ–°

