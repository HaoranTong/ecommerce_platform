# 文档管理规范

## 目录结构标准

基于现有文档架构，维持以下目录结构：

```
docs/
├── standards/          # 开发规范文档
│   ├── openapi.yaml    # API契约定义
│   └── ...            # 其他标准文档
├── modules/           # 模块功能文档
├── architecture/      # 系统架构文档
├── development/       # 开发环境文档
├── operations/        # 运维部署文档
├── requirements/      # 需求分析文档
├── status/           # 项目状态文档
├── analysis/         # 分析报告文档
├── templates/        # 文档模板
└── _archive/         # 废弃文档备份
```

## 文档功能定义

### README文档职责

#### 根目录README.md
**功能定位**：项目入口导航
**必须包含**：项目介绍、核心特性、快速开始、文档导航
**禁止包含**：详细配置、完整API说明、实现细节、重复内容

#### 目录README.md  
**功能定位**：目录内容索引和结构说明
**必须包含**：
- 目录用途说明
- 完整目录结构图（包含所有子目录和重要文件）
- 每个子目录的名称和作用说明
- 每个重要文件的名称和作用说明
- 相关文档链接

**禁止包含**：文件详细内容、跨目录说明、重复介绍

#### 模块README.md
**功能定位**：模块功能概览
**必须包含**：模块用途、关键功能、使用入口、相关文档
**禁止包含**：详细实现、完整配置、API详细规范

### 目录结构同步要求

#### 强制同步原则
- README中的目录结构必须与实际目录结构完全一致
- 新增/删除目录时必须同步更新README
- 重命名目录时必须同步更新README中的说明

#### 结构说明格式
```
目录名/
├── 子目录1/              # 子目录作用说明
├── 子目录2/              # 子目录作用说明
├── 重要文件1.ext         # 文件作用说明
└── 重要文件2.ext         # 文件作用说明
```

### 技术文档分类

| 文档类型 | 存放位置 | 功能定位 | 禁止内容 |
|---------|---------|---------|---------|
| **架构设计** | architecture/ | 系统设计决策、技术选型 | 实现代码、配置详情 |
| **开发标准** | standards/ | 开发规范、API契约定义 | 具体实现、业务逻辑 |  
| **开发指南** | development/ | 环境配置、工具使用 | 业务需求、架构设计 |
| **运维文档** | operations/ | 部署配置、监控运维 | 开发细节、业务逻辑 |
| **需求文档** | requirements/ | 业务需求、功能规格 | 技术实现、代码细节 |
| **模块文档** | modules/ | 功能模块说明 | 全局架构、其他模块细节 |

### 测试脚本管理规范

#### 测试脚本分类和存放位置
| 脚本类型 | 存放位置 | 命名规范 | 用途 |
|---------|---------|---------|------|
| **单元测试** | tests/ | test_*.py | 模块功能测试 |
| **集成测试** | tests/integration/ | test_*_integration.py | 模块间协作测试 |
| **系统测试** | scripts/ | *_test.ps1 | 端到端系统测试 |
| **临时测试脚本** | 根目录 | test_*.py | 开发调试用（临时） |

#### 根目录测试脚本处理规则
- **允许情况**：开发调试期间的临时测试脚本
- **命名要求**：必须以`test_`开头，包含功能描述
- **生命周期**：功能开发完成后必须移至`tests/`目录或删除
- **文档要求**：临时脚本需在README.md中说明用途和计划

#### 强制清理触发条件
- **功能完成提交** → 清理根目录临时测试脚本
- **版本发布前** → 确保根目录无临时测试文件
- **代码审查时** → 检查测试脚本分类是否正确

## README同步触发机制

### 强制同步触发条件
- **创建新模块** → 必须同时创建/更新模块README.md
- **修改API接口** → 必须更新相关模块README.md
- **变更项目结构** → 必须更新根目录README.md
- **添加新功能** → 必须更新对应目录README.md
- **修改启动方式** → 必须更新根目录README.md

### 同步检查执行格式
🔍 检查点触发：[文件操作类型]
📋 必须验证：检查对应README.md是否需要更新
✅ 验证确认：确认README内容与实际代码一致
🚫 执行操作：更新README.md内容

### 自动触发规则
IF create_file app/modules/* THEN 更新 docs/modules/README.md
IF 修改 main.py THEN 检查根目录README.md
IF create_file docs/* THEN 更新对应目录README.md
IF 修改启动脚本 THEN 更新根目录README.md快速开始部分

## 文档创建与管理

## 文档创建与管理

### 创建前强制检查
1. `grep_search "关键词" docs/` - 搜索已有文档
2. `list_dir docs/目标目录/` - 检查目录结构  
3. 确认无功能重复 - 更新现有文档而非新建

### 命名规范
- 使用英文小写字母，单词间连字符分隔
- README.md - 目录导航（每目录必有）
- overview.md - 概述文档
- api-spec.md - API接口规范（详细的接口规范要求、参数传递规范）
- api-implementation.md - API接口实施细节记录（具体实施过程、代码实现）
- 文件名清晰表达内容用途

#### API文档职责分工
- **api-spec.md**：遵循 standards/openapi.yaml 契约，详细定义接口规范、参数传递、错误处理等技术要求
- **api-implementation.md**：记录接口具体实施细节、开发过程、实现方案等开发记录

#### 全局API契约管理
- **standards/openapi.yaml**：项目API宪法，所有接口开发必须遵守的技术契约
- **位置要求**：API契约文档必须存放在 standards/ 目录，与其他开发标准统一管理
- **引用关系**：各模块 api-spec.md 必须引用并遵循全局契约定义

### 禁止行为
- 不检查就创建文档
- 创建功能重复文档  
- 在README中添加实现细节
- 跨目录重复内容
- 删除文档不迁移有价值内容

## 质量控制

### 内容检查要点
- 功能定位是否明确
- 是否包含禁止内容
- 文档间是否有重复  
- 链接引用是否正确

### 维护原则
- 保持内容简洁聚焦
- 避免功能边界模糊
- 确保同步更新及时
- 定期清理过时内容