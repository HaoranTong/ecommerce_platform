# ⚠️ 每日强制提醒 ⚠️
**在进行任何开发工作前，必须：**
1. **阅读并遵循本MASTER.md的所有流程**
2. **检查现有文档，禁止创建重复文档**
3. **按照既定工作流程执行，不得跳过步骤**
4. **文档驱动开发 = 先文档后代码，严格执行**

---

<!--
文档说明：
- 内容：文档驱动开发的总纲，定义完整的开发流程和文档规范
- 使用方法：所有开发人员必读，项目管理参考，文档驱动开发的核心指南
- 更新方法：流程变更时由项目负责人更新
- 引用关系：被所有开发相关文档引用，是项目的核心流程文档
- 更新频率：开发流程优化时更新
-->

# 🎯 文档驱动开发总纲 (MASTER)

> **📚 Documentation-Driven Development (DDD) 核心指南**  
> **所有技术决策和开发活动的唯一入口和检查点**

## 🌟 文档驱动开发理念

### 核心原则
1. **文档先行**: 编码前先写文档，确保思路清晰
2. **文档完整**: 文档覆盖设计、实现、测试、部署全流程
3. **文档同步**: 代码变更必须同步更新文档
4. **文档可用**: 文档必须准确、最新、易读
5. **文档驱动**: 文档是决策依据，不是事后补充

### 价值主张
- **提高开发效率**: 减少沟通成本，避免重复工作
- **保证代码质量**: 设计文档驱动更好的架构
- **降低维护成本**: 完整文档简化后期维护
- **促进团队协作**: 统一的文档标准提升协作效率
- **支持知识传承**: 文档是团队知识资产

## 🚨 强制检查点

### 开发生命周期检查点
你必须在以下时刻参考本文档和相关文档：

#### 🔧 命名操作强制检查点 (优先级最高)
**任何命名操作前必须执行**：
- [ ] **阅读** [命名规范总纲](docs/standards/naming-conventions.md) - 获取完整命名标准
- [ ] **确认模块名称** - 查找模块名称映射表，使用统一名称
- [ ] **检查命名优先级** - 文档命名 → 数据库命名 → API命名 → 代码命名
- [ ] **验证命名一致性** - 确保同一实体在所有层级使用统一命名

**💻 强制执行命名检查脚本**：
```powershell
# 强制执行命名规范检查（每日必做）
.\scripts\check_naming_compliance.ps1

# 查看详细违规报告
.\scripts\check_naming_compliance.ps1 -Verbose

# 🚨 退出码检查：必须返回 0 (无违规) 才能继续开发
```

**命名检查退出码说明**：
- `0`: 完全符合规范，可以继续开发
- `1`: 存在违规，必须修复后才能继续
- `2`: 配置错误，需要检查脚本配置

详细使用说明参见：[脚本使用指南](scripts/README.md)

#### 1. 📋 需求分析阶段
- [ ] 阅读 [业务需求文档](requirements/business.md)
- [ ] 阅读 [功能需求文档](requirements/functional.md)
- [ ] 阅读 [非功能需求文档](requirements/non-functional.md)
- [ ] **强制执行命名检查** - 需求中涉及的实体命名必须遵循规范
- [ ] 确认需求理解无误，有疑问及时沟通

#### 2. 🏗️ 架构设计阶段
- [ ] 阅读 [系统架构总览](architecture/overview.md)
- [ ] 阅读 [API设计规范](architecture/api-standards.md)
- [ ] 阅读 [数据模型规范](architecture/data-models.md)
- [ ] **强制执行命名检查** - 架构中所有实体命名必须遵循规范
- [ ] 如涉及安全，阅读 [安全架构](architecture/security.md)
- [ ] 编写模块设计文档

#### 3. 💻 代码开发阶段 (强制文档优先)
- [ ] **文档优先检查** - 确认相关文档已完整编写
- [ ] **禁止无文档编码** - 文档未描述的功能严禁编写代码
- [ ] 遵循 [开发规范](development/standards.md)
- [ ] **强制执行命名检查** - 所有代码实体命名必须遵循规范
- [ ] 参考 [模块文档模板](templates/module-template.md)
- [ ] 编写符合 [API规范](architecture/api-standards.md) 的接口
- [ ] 同步更新模块文档

#### 4. 🧪 测试阶段
- [ ] 遵循 [测试规范](development/testing.md)
- [ ] **强制执行命名检查** - 测试用例命名必须遵循规范
- [ ] 更新测试文档
- [ ] 确保测试覆盖率达标

#### 5. 🚀 部署阶段
- [ ] 阅读 [部署指南](operations/deployment.md)
- [ ] 配置 [环境变量](operations/environment.md)
- [ ] **强制执行命名检查** - 环境变量命名必须遵循规范
- [ ] 更新部署文档

#### 6. 📊 运维阶段
- [ ] 监控关键指标
- [ ] 更新 [状态文档](status/status.md)
- [ ] 记录 [问题和解决方案](status/issues-tracking.md)

## � 文档创建强制检查流程

### 创建任何文档前必须执行的检查

#### ⚠️ 防止重复文档的强制检查
**在创建任何新文档之前，必须严格执行以下检查**：

1. **📂 检查目标目录**
   ```bash
   # 检查目标目录下是否已有类似文档
   ls docs/目标目录/
   ```

2. **🔍 搜索相同功能的文档**
   ```bash
   # 在整个docs目录中搜索相关关键词
   grep -r "关键词" docs/
   ```

3. **📋 检查README文档**
   - 检查目标目录的README.md是否已存在
   - 检查父目录的README.md是否已覆盖该功能

4. **🔄 检查现有文档结构**
   ```bash
   # 列出相关目录结构
   tree docs/相关目录/
   ```

#### ✅ 文档创建决策流程
1. **如果找到相同功能文档** → 更新现有文档，不创建新文档
2. **如果找到类似功能文档** → 评估是否可以合并，优先合并
3. **如果确实需要新文档** → 确保文件名清晰，避免未来冲突
4. **创建后立即更新** → 相关的README.md和导航文档

#### ❌ 绝对禁止的行为
- **禁止不检查就创建文档**
- **禁止创建功能重复的文档**  
- **禁止创建名称相似的文档**
- **禁止事后发现重复再删除**

#### 🗑️ 文档删除强制流程
**删除任何文档前必须严格执行以下步骤**：

1. **📋 内容价值评估**
   ```bash
   # 分析待删除文档的有价值内容
   grep -n "重要信息|核心内容|独特观点" 待删除文档.md
   ```

2. **🔄 内容迁移检查**
   - 识别待删除文档中的有价值内容
   - 检查保留文档是否已包含这些内容
   - 将缺失的有价值内容迁移到保留文档

3. **📝 引用关系更新**
   ```bash
   # 检查所有引用该文档的位置
   grep -r "待删除文档名" docs/
   ```
   - 更新所有引用链接
   - 更新目录结构文档
   - 更新导航文档

4. **✅ 删除确认清单**
   - [ ] 有价值内容已完整迁移
   - [ ] 所有引用链接已更新
   - [ ] 相关README.md已更新
   - [ ] 删除理由已记录在提交信息中

5. **⚠️ 强制等待期**
   - 标记为"待删除"状态，等待24小时
   - 团队成员确认无异议后执行删除
   - 删除操作必须在专门的提交中执行

#### ❌ 删除操作禁止行为
- **禁止直接删除** - 未经价值评估和内容迁移
- **禁止批量删除** - 多个文档必须逐个处理
- **禁止无记录删除** - 删除原因必须详细记录
- **禁止紧急删除** - 跳过等待期和确认流程

## �📋 文档驱动开发工作流程

### Phase 1: 文档准备 🔍

#### 1.1 需求分析文档化
```mermaid
graph TD
    A[接收需求] --> B[分析业务价值]
    B --> C[编写业务需求文档]
    C --> D[分解功能需求]
    D --> E[编写功能需求文档]
    E --> F[评估非功能需求]
    F --> G[编写非功能需求文档]
    G --> H[需求评审]
    H --> I[需求确认]
```

**输出文档**:
- `requirements/business.md` - 业务需求和价值说明
- `requirements/functional.md` - 详细功能需求
- `requirements/non-functional.md` - 性能、安全等需求

#### 1.2 架构设计文档化
```mermaid
graph TD
    A[需求确认] --> B[架构设计]
    B --> C[编写架构文档]
    C --> D[API设计]
    D --> E[编写API文档]
    E --> F[数据模型设计]
    F --> G[编写数据模型文档]
    G --> H[架构评审]
    H --> I[架构确认]
```

**输出文档**:
- `architecture/overview.md` - 系统架构总览
- `architecture/api-standards.md` - API设计规范
- `architecture/data-models.md` - 数据模型设计
- `modules/{module}/overview.md` - 模块设计文档

### Phase 2: 开发实现 💻

#### 2.1 模块开发工作流
```mermaid
graph TD
    A[选择模块] --> B[阅读模块文档]
    B --> C[创建开发分支]
    C --> D[编写代码]
    D --> E[编写单元测试]
    E --> F[更新模块文档]
    F --> G[代码自测]
    G --> H[提交代码审查]
```

#### 2.2 代码开发规范
**开发前检查**:
- [ ] 模块设计文档是否完整？
- [ ] API接口是否已定义？
- [ ] 数据模型是否已确认？
- [ ] 依赖关系是否清晰？

**开发中要求**:
- [ ] 遵循代码规范
- [ ] 添加充分的注释
- [ ] 编写单元测试
- [ ] 同步更新文档

**开发后检查**:
- [ ] 代码是否符合规范？
- [ ] 测试是否通过？
- [ ] 文档是否已更新？
- [ ] API文档是否准确？

### Phase 3: 测试验证 🧪

#### 3.1 测试文档化流程
```mermaid
graph TD
    A[代码完成] --> B[编写测试用例]
    B --> C[执行单元测试]
    C --> D[执行集成测试]
    D --> E[更新测试文档]
    E --> F[性能测试]
    F --> G[安全测试]
    G --> H[测试报告]
```

**测试文档要求**:
- [ ] 测试用例完整覆盖功能点
- [ ] 性能测试结果记录
- [ ] 安全测试结果记录
- [ ] 问题和修复记录

### Phase 4: 部署上线 🚀

#### 4.1 部署文档化流程
```mermaid
graph TD
    A[测试通过] --> B[准备部署文档]
    B --> C[配置环境]
    C --> D[执行部署]
    D --> E[验证部署]
    E --> F[更新运维文档]
    F --> G[监控配置]
    G --> H[部署完成]
```

**部署文档要求**:
- [ ] 部署步骤文档化
- [ ] 环境配置记录
- [ ] 回滚方案准备
- [ ] 监控指标定义

## 📊 文档质量管理

### 文档质量标准
1. **完整性**: 覆盖设计、实现、测试、部署
2. **准确性**: 与实际代码实现保持一致
3. **可读性**: 结构清晰，语言简洁
4. **可维护性**: 易于更新和扩展
5. **可追溯性**: 变更历史清晰

### 文档评审流程
```mermaid
graph TD
    A[文档创建/更新] --> B[自我检查]
    B --> C[同行评审]
    C --> D[架构师评审]
    D --> E{评审通过?}
    E -->|是| F[文档发布]
    E -->|否| G[修改文档]
    G --> B
```

### 文档维护责任
- **需求文档**: 产品经理负责
- **架构文档**: 架构师负责
- **模块文档**: 模块负责人负责
- **API文档**: 接口开发者负责
- **运维文档**: 运维团队负责

## 📏 文档命名规范

### 🚨 强制命名原则 (最高优先级)

#### 📋 命名操作检查清单
**任何命名操作前必须严格执行**:
1. **📖 阅读规范** - 查阅 [命名规范总纲](docs/standards/naming-conventions.md)
2. **🔍 检查映射** - 确认模块名称映射表中的标准名称
3. **✅ 验证一致性** - 确保同一实体在所有层级使用统一命名
4. **📝 文档记录** - 所有命名决策必须在文档中记录

#### 🎯 命名优先级（强制执行顺序）
```mermaid
graph TD
    A[1. 文档命名] --> B[2. 数据库命名]
    B --> C[3. API命名]
    C --> D[4. 代码命名]
    
    A --> A1[模块文档必须先定义标准名称]
    B --> B1[数据库表和字段遵循文档定义]
    C --> C1[API端点和参数遵循数据库规范]
    D --> D1[代码实体遵循API规范]
```

#### ⚠️ 文档驱动开发强制原则
1. **文档优先于代码** - 文档未描述的功能严禁编写代码
2. **命名先于实现** - 实体命名必须在文档中先确定
3. **一致性检查** - 跨层级命名必须保持一致
4. **变更同步** - 命名变更必须同步更新所有相关文档和代码

#### 🔒 命名规范强制执行
- **代码审查阻止** - 不符合命名规范的代码拒绝合并
- **文档检查** - 文档创建时强制执行命名规范检查
- **自动化验证** - CI/CD流程中集成命名规范检查
- **团队培训** - 定期进行命名规范培训和考核

### 强制命名规则

#### 目录级文档命名
- **README.md** - 每个目录的**导航和索引文档**（强制要求）
  - 作用：提供该目录的总览、文档索引、使用说明
  - 位置：每个docs子目录必须有README.md
  - 示例：`docs/modules/README.md`、`docs/architecture/README.md`

#### 功能性文档命名
- **overview.md** - **模块或组件的详细概述文档**
  - 作用：描述具体模块的功能、架构、设计原理
  - 位置：每个模块目录下使用overview.md
  - 示例：`docs/modules/user-auth/overview.md`

- **standards.md** - **标准和规范类文档**
  - 作用：定义设计标准、开发规范、技术标准
  - 示例：`docs/api/standards.md`、`docs/development/standards.md`

#### 专用文档命名
- **business.md / functional.md / non-functional.md** - 需求文档
- **design.md** - 详细设计文档
- **api-spec.md** - API规范文档
- **deployment.md** - 部署相关文档

### 命名原则
1. **一致性原则** - 相同类型的文档使用相同命名模式
2. **描述性原则** - 文件名要清晰表达文档内容
3. **层次性原则** - README.md用于导航，overview.md用于详述
4. **英文优先** - 文件名使用英文，避免中文和特殊字符

### ❌ 禁止的命名方式
- 使用中文文件名
- 随意命名（如 doc1.md, temp.md）
- 功能相同但命名不一致
- 缺少目录级README.md文档

## �🛠️ 文档工具链

### 推荐工具栈
1. **编写工具**: VS Code + Markdown All in One
2. **版本管理**: Git + GitHub
3. **协作平台**: GitHub Issues + Pull Requests
4. **图表工具**: Mermaid + PlantUML
5. **API文档**: Swagger/OpenAPI
6. **部署文档**: GitBook 或 MkDocs

### 工具配置
参考 [开发工具指南](development/tools.md) 配置文档编写环境。

## 📈 文档驱动的项目管理

### Sprint规划中的文档
1. **Sprint开始**: 确认所需文档完整性
2. **Sprint进行**: 同步更新开发文档
3. **Sprint结束**: 完善所有相关文档
4. **Sprint回顾**: 评估文档质量和效果

### 文档与代码同步策略
- **原则**: 文档变更和代码变更在同一PR中
- **检查**: PR必须包含相关文档更新
- **验证**: CI/CD检查文档链接有效性

## 🎯 团队协作规范

### 沟通原则
1. **文档优先**: 技术讨论先查阅相关文档
2. **问题记录**: 技术问题和解决方案文档化
3. **知识共享**: 重要技术决策文档化
4. **评审文化**: 定期文档评审和改进

### 角色职责
| 角色 | 文档职责 |
|------|----------|
| 产品经理 | 业务需求、功能需求文档 |
| 架构师 | 架构设计、技术标准文档 |
| 开发工程师 | 模块设计、API、代码文档 |
| 测试工程师 | 测试策略、测试结果文档 |
| 运维工程师 | 部署、运维、监控文档 |
| 项目经理 | 项目状态、里程碑文档 |

## 📋 常用检查清单

### 新功能开发检查清单
```markdown
开发前:
- [ ] 阅读相关需求文档
- [ ] 理解架构设计约束
- [ ] 确认API设计规范
- [ ] 创建/更新模块文档

开发中:
- [ ] 遵循代码规范
- [ ] 编写充分测试
- [ ] 更新API文档
- [ ] 记录重要决策

开发后:
- [ ] 代码审查通过
- [ ] 测试覆盖率达标
- [ ] 文档更新完成
- [ ] 部署文档准备
```

### 文档质量检查清单
```markdown
内容质量:
- [ ] 文档头部信息完整
- [ ] 目标读者明确
- [ ] 内容逻辑清晰
- [ ] 示例代码可执行

格式质量:
- [ ] 遵循文档规范
- [ ] 标题层级正确
- [ ] 链接有效可访问
- [ ] 图表清晰易懂

技术质量:
- [ ] 技术信息准确
- [ ] 与代码实现一致
- [ ] 版本信息正确
- [ ] 依赖关系清晰
```

## 🔄 持续改进机制

### 文档改进流程
1. **收集反馈**: 团队成员使用文档时的反馈
2. **识别问题**: 定期分析文档使用痛点
3. **制定改进**: 优化文档结构和内容
4. **实施改进**: 更新文档和流程
5. **效果评估**: 评估改进效果

### 文档指标跟踪
- **文档完整度**: 各模块文档完成情况
- **文档更新频率**: 文档与代码同步程度
- **文档使用率**: 团队成员文档使用情况
- **问题解决效率**: 通过文档解决问题的效率

## 🔗 核心文档导航

### 📋 需求和规划
- [业务需求](requirements/business.md) - 项目业务目标和价值
- [功能需求](requirements/functional.md) - 详细功能规格说明
- [非功能需求](requirements/non-functional.md) - 性能、安全、合规要求

### 🏗️ 架构和设计  
- [系统架构总览](architecture/overview.md) - 整体技术架构
- [数据模型规范](architecture/data-models.md) - 数据设计标准
- [安全架构](architecture/security.md) - 安全设计指南
- [事件驱动架构](architecture/event-driven.md) - 事件驱动设计
- [集成架构](architecture/integration.md) - 系统集成设计

### 📡 API文档
- [API文档中心](api/README.md) - API文档导航
- [API设计标准](api/standards.md) - 接口设计规范
- [OpenAPI规范](api/openapi.yaml) - 完整API规范文件

### 📦 模块文档
- [模块总览](modules/README.md) - 所有模块的导航
- [用户认证模块](modules/user-auth/overview.md)
- [购物车模块](modules/shopping-cart/overview.md)
- [订单管理模块](modules/order-management/overview.md)
- [更多模块...](modules/)

### 💻 开发指南
- [开发规范](development/standards.md) - 代码和开发标准
- [测试指南](development/testing.md) - 测试策略和规范
- [工作流程](development/workflow.md) - 开发工作流程
- [开发工具](development/tools.md) - 工具配置指南
- [文档规范](development/documentation-standards.md) - 文档写作标准

### 🚀 运维部署
- [部署指南](operations/deployment.md) - 系统部署流程
- [环境配置](operations/environment.md) - 环境变量管理
- [运维手册](operations/README.md) - 运维操作指南

### 📊 项目状态
- [项目状态总览](status/status.md) - 项目整体进度
- [当前冲刺](status/current-sprint.md) - 当前Sprint状态
- [问题跟踪](status/issues-tracking.md) - 问题管理和解决
- [里程碑进度](status/milestones.md) - 项目里程碑跟踪

### 📚 模板和工具
- [文档模板](templates/) - 各类文档的标准模板
- [代码示例](templates/) - 常用代码示例库

---

## 🎖️ 文档驱动开发的成功标志

当我们的项目达到以下状态时，就实现了真正的文档驱动开发：

✅ **新团队成员可以通过文档快速上手**  
✅ **技术决策有完整的文档依据**  
✅ **代码变更必然伴随文档更新**  
✅ **问题解决方案可以在文档中找到**  
✅ **项目知识不依赖特定人员**  

---

📝 **记住**: 文档不是开发的负担，而是开发的利器。好的文档是项目成功的基石！
